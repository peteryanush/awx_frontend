---
- name: The React Native CLI
  shell: yes | curl -0 -L https://npmjs.org/install.sh | sudo sh

- name: Download Android NDK
  get_url: 
     url=http://dl.google.com/android/repository/android-ndk-r10e-darwin-x86_64.zip 
     dest=/tmp
  register: bin_files

- name: Install unzip
  yum:
    name: unzip
    state: present

- name: Create Android NDK directory
  file:
    path: /opt/dfadmin/android-sdk-linux/ndk
    state: directory

- name: Unpack Android NDK
  unarchive:
    src: /tmp/android-ndk-r10e.zip
    dest: /opt/dfadmin/android-sdk-linux/ndk
    remote_src: yes

- name: Configure Android SDK paths
  action: lineinfile dest=/home/dfadmin/.bashrc line="{{ item }}"
  with_items:
  - 'export ANDROID_NDK=$HOME/android-sdk-linux/ndk/android-ndk-r10e'
  - 'export ANDROID_HOME=/opt/dfadmin/android-sdk-linux'
  - 'export ANDROID_TOOLS=$ANDROID_HOME/tools/'
  - 'export ANDROID_PLATFORM_TOOLS=$ANDROID_HOME/platform-tools/'
  - 'export PATH=$PATH:$ANDROID_TOOLS:$ANDROID_PLATFORM_TOOLS'
