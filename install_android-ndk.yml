---
- name: The React Native CLI
  shell: yes | curl -0 -L https://npmjs.org/install.sh | sudo sh

- name: Download Android NDK
  get_url: 
     url=http://dl.google.com/android/repository/android-ndk-r10e-darwin-x86_64.zip 
     dest=/tmp
  register: bin_files

- name: Install unzip
  yum:
    name: unzip
    state: present

- name: Create Android NDK directory
  file:
    path: /home/dfadmin/ndk
    owner: dfadmin
    group: dfadmin
    mode: u=rwx,g=rx,o=rx
    state: directory

- name: Unpack Android NDK
  command: "unzip /tmp/android-ndk-r10e-darwin-x86_64.zip -d /opt/dfadmin"

- name: Raname zip file
  command: "mv /opt/dfadmin/android-ndk-r10e /opt/dfadmin/ndk"

- name: Create files
  copy:
    content: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31396336363562663835386165326138376631363162363730623337356561396465363635646132
          3638353137396164353861373563313836663161393831660a383161623632643164666539326361
          31343037613464646435396139336438343962356564656565373565623432623735373766643261
          6431616132353837640a613039353438353764333933646363646135653935306665623561363834
          34326438623465386430353561656566363132383263373037316133373937333839663064646463
          30386636353663306263366238336333323339373839313538343564346334363863666536316163
          33316461663439383639306633663330376134623730663733613031656265633932623333623237
          37333131363362623465626365336435323165366430383738666464303534616130626535636230
          38306666643337343062396133623034326364316335323839653230303535333061393866383365
          65336339633862396262353261323339633162346237346261313439316330653030393339303663
          36643635346436366464613133333032623834666361646637363065633439353337336562643734
          33303833653636393135
    dest: /opt/dfadmin/dforce-mobile/android/signing.gradle

- name: Create file
  copy:
    content: !vault | 
          $ANSIBLE_VAULT;1.1;AES256
          37663630346635303862366263656332383666303761643764656337333838353863646232363331
          6434396334306434373036313865333132656161336339330a363861663335346639663164386130
          62336563306536383335313739356164353561393065306365383632323331366562303435326233
          3734303330346665340a653135643763363535393538636266336332613034386337613738373839
          35643434633234613937613337663761356433633837333764366235643539343332653466363135
          32356434306665373733396165626563356335623038316564366264383766653862353563333335
          39636433366334303162313334623739303633363931633264616665663961303631613061313562
          35663933323864326265346462373032633130393833393731626539313932623766346334353430
          31643462623164393837343162663833346563303437386162373531313636623266393231366166
          38633436613939623961616361383836636238363861353665623532356430306131386233646265
          38313161326236626336613131346238353937626635393330616332373662303139656636356366
          31633630306139306464353835663836363034363732303965363866386462613332613965363865
          32376633303164313863323932323831373037326330633665643537623936343163313865623761
          36393361316465386132663834383136303138613235616463663231653436656366373562306632
          36356630386563653763343131666562393834623435633361653064636233396466303631613336
          32626631626434623263633738616530316264306662376135376166626664336133633433663731
          37376463393035646263333765343664336237316166376164373565323535396665386262613861
          65393963333362643363653666393332663639303135303139646537396234633533326639616266
          30613235666534303265323566383563343361323962313538363931323536353562373638656134
          61303933633432663938336532366265343235343331656335303061393337633465613231643961
          37616134363065356436363033613435353930663832313162363837343632623765366335366262
          31333761363439383663313461383135333733373237396438316335343763313236353139613130
          34366234643963626561353161326432663333656232333838663864393665666336613837366436
          39343064353030646533393637663935663335643162643930383133646365316635343130323630
          34346234663361323933646530353262643561323331383836336666383732653536616138343732
          62613931343265323563633361653230383861656663343762353931336239643464326532666238
          39386465356161313362343433366533393965303965363165656564356131313366303266393364
          39316562313364666165323465383333326637323866353932336366303765316533333137636664
          66636331666461333562623635353861303861303062373666626232333238636661663434643361
          35343563643364383734343462316662346238373964636564666533396238303437336265323032
          30666335386239626163373039346436383064643838616533303465383461666538393163386134
          62363565353761666634643161383739396561653161383435353637386239323334366531326565
          35303135336166666230623831383638633731366537383335343130343236633538613666613963
          34306435353262396439353466653432343763326564613933643832653930363730383965336136
          34336336613031383733396638343031633762633936363763353936346130316562306161393035
          33666461333464373464376533613833346538303933306261333265303130323435346235396365
          65656138383939623264653739646564333461616361343461396665353761616339636262353432
          35383336326164383965373930663636306130626632326539313332326265306339303030383738
          61376466616663333365366435346134353830346464633363353430623436326365663164393333
          31323566656337303933633330653464366432656631346362373365366565356230373866316430
          66313237346339633564353139333436366566383337393264386435373264303137626265316165
          30396336313165343137613235363866336138333137343630653136613261626462363438336335
          30333932623764346233303564633262343834306632613632333835323538393863636236326537
          37323633313365313431656436613531383065663866383932643365363764633830663862303561
          64616137303031663533333438343531393266646563643134666139643036353439653031376532
          34386466663230363438656466643534663537643862616133373737313236326263396231303239
          32363234663638343264383936393165386563313733386230636565383030363164343435323532
          30333838633039653163646566313161396137316462386139613037343331333662356137336433
          35306333343439626564333234643932626139636362653138313165343862383563656232346530
          33376166386639626563323362633230623666386436386335663334303766386435336533386562
          32363432353235636463396131346562613937373764613031653734323463623631653830333238
          37313230373033653965303665663733313939306239666236333265383361323635373335353634
          31363965363136326333383934646265316431343636333634303330623739323566656661616361
          39356263303534656534386664653963363433383062356537333339646165346137653265363334
          31326565623239646561656133653365633539376463306562383334393236313866626436313563
          39386233643035343535373037616534373932643964656239316566343238346663343764373536
          65383763636235376564616139306463626464343364353661626430313831633239326136663963
          64633936306131363533316265303337393836623263636363313263316432376233323830376566
          66626537613835666439393735663964373864373462626635663537343164643739666462336466
          65383033656635366163643666653265383062373032353836313337353333363531323437393563
          61393533633231656161393931363239666563303531343233343531373963313539346138323263
          35633135613936643834653036626539643933386335323165386530636136616430356238313835
          62333030326334313764633361653839623938366336343466623433663964346162633562396137
          63353635356563363635653764393838343266393963393264386466353038373364623466376561
          65346662346561353033653232656439396338316531343466383430626633383330346238363036
          30313238333430333962663430303631623036656233633463373262666238306631646461363336
          33313339313766623463326231323166653066343834326231383261363739383162633638303137
          39636463633938613730613332636462653333383261653266376461626135663662316666303936
          36613661633465626461366238316664303565616334363361613932656334333530646465646663
          66373064333131613262323739393337653165666566343363343634653231613163393665326565
          35626563653833373038666530396334633036643236326463316530333139393065326132613463
          39616161623932633134376339326435386432353437646631663530363537306363663537663732
          34383137646535326337353461633038396438633263613530653432346630303037393639333133
          35313636366634656333646538613262303561386434313562373038373636636438663664613366
          36306162336661653335346366333566653163613431626566613066363630383139373439633136
          36643735363062343039393139333336386634336434646663663331396162623562386235313333
          33386363643638643161366530333365666430643263613534363163656264396334366365663931
          31663832313330616333343332333666633162313530643033353736353063393964626631363061
          34373132353730643261383939663730376665336634333532306465653235633130323537366366
          62336430653939653161356162653334626563646536393338333036353163346430376538396165
          36323965333037383733646238633462306235616639616232386332653261356134363962656237
          64363131303061653434356234623839326139373934366230396233633334333964626162643163
          66326632383661626165623538333638633430663235346166623030636335666165353161646331
          30643465386365626438616633663234333733353065326365653834386230643234303632613234
          33353834636466343534663234306461396535643434656136643435333262653639366565393165
          30323234323436613065346261366164373962306238363233383632333934623762653434306562
          63633737646431303364396538396539396336373133383034373230323663396163313632323363
          61373864326564666662626432393131343534383937383235663366646264666638333933626465
          62336163653238316461623862646632316130313963646332386434376235336435343138653637
          65396636643133353963646233306533396566363663663934353631383364656563326533376466
          64656666353230363862383535336331393338333161363132336337613234356130653062333534
          30363131383163663030616437646562323039623332653736313635303863323837613431363965
          36313366326233616435653632623331393636643735343130633866393064343136616562393066
          31326530616665656263336232383138643635623235316539356434633931626361373366303035
          35333464373734366130663837373833363038656638366339323739663063363831343534613562
          66653133346334343730363833393461323962323833353262336262616531666234363439303033
          61643332376237303331333462663236623561623534306638626230333765656162303936653037
          66326164383064633738663631306637363339643165353931383432333132636638643864653466
          63666163346161386634323263616462646231626436623431636664393632323664363536396239
          39323338376539646434616132646464343530383130646164663031373364306638303236356634
          34626133366337643733303765656362363831306332346466343835626338656363306463626537
          61323065383830373437346265613161303135633939333064306331646537633137623038366566
          31613533636133376138346261323664386638653066363936626633363939623436363563613162
          65396535663637373630643763363036363065356464656436333962613830656534663832613330
          66636533353666613838353366303235393432383939376531666236363965653233343138373163
          38643133656165333736303431616333636430333130616637643062653766363562376233346436
          39303733313833363232336139333832636237386261383137306531313832376539373436343933
          30386135653132346561366266353361306538326637643735373930353563616135623663313035
          62323165653839646438396635363730336538623139336663386633353531393066636630666634
          30353331373137323836663539313931396332316635306265323133663438303265393038323934
          37613564643261396139393230663735323961663464313536353163613136613430633538356232
          64323032386262343831326231353536613861336461336465353633306462383764346335326336
          39346135646335306631303131663137393333386566663836346466363439386339636438623333
          35346165306133376434316539383633393933653065333763356461373463336663313764303933
          39373266333864323135383839313133636339643634633336373861663232653034633131653939
          66343937356264333832343434376332633265326164346431343437323234303034383561306164
          66313638313435373332623436653334333338663833393731393933346163363332366331393566
          66386139643862363362663731626363346564383033373437376362316637306535633837303465
          31396535313537383765623439316539306161313133393035653864396662313764643564343836
          63366533666666383966313330323438303761383666623865666263366466373833373233363938
          31663165313565323739396533613732643833343363613865626261623236626533
    dest: /opt/dfadmin/dforce-mobile/android/drakontas.keystore

- name: Configure Android SDK paths
  action: lineinfile dest=/home/dfadmin/.bashrc line="{{ item }}"
  with_items:
  - 'export ANDROID_NDK=/opt/dfadmin/ndk'
  - 'export ANDROID_HOME=/opt/dfadmin/android-sdk-linux'
  - 'export ANDROID_TOOLS=$ANDROID_HOME/tools/'
  - 'export ANDROID_PLATFORM_TOOLS=$ANDROID_HOME/platform-tools/'
  - 'export PATH=$PATH:$ANDROID_TOOLS:$ANDROID_PLATFORM_TOOLS'
  - 'export PATH=$PATH:$ANDROID_HOME/emulator'
  - 'export PATH=$PATH:$ANDROID_HOME/tools/bin'
  - 'export PATH=$PATH:$ANDROID_HOME/platform-tools'
