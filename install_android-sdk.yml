---

- name: Download Android SDK
  action: get_url url=https://dl.google.com/android/repository/sdk-tools-linux-3859397.zip dest=/tmp/android.tgz

- name: Create Android SDK directory
  file:
    path: /opt/dfadmin/android-sdk-linux
    state: directory

- name: Unpack Android SDK
  become: yes
  unarchive:
    copy: no
    src: /tmp/android.tgz
    dest: /opt/dfadmin/android-sdk-linux
    creates: /opt/dfadmin/android-sdk-linux/tools
    mode: 0777

- name: Install Android SDK
  shell: yes | ./android update sdk
  args:
    chdir: /opt/adt/android-sdk-linux/tools 

- name: Configure Android SDK paths
  action: lineinfile dest=/home/dfadmin/.bashrc line="{{ item }}"
  with_items:
  - 'export ANDROID_HOME=/opt/dfadmin/android-sdk-linux'
  - 'export ANDROID_TOOLS=$ANDROID_HOME/tools/'
  - 'export ANDROID_PLATFORM_TOOLS=$ANDROID_HOME/platform-tools/'
  - 'export PATH=$PATH:$ANDROID_TOOLS:$ANDROID_PLATFORM_TOOLS'
